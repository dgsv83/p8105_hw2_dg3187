---
title: "Homework 2"
author: Danyang Gui
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```


## Problem 1

Read the Mr. Trashwheel dataset.

```{r}
trashwheel_df = 
  read_xlsx(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )

```


Read precipitation data!

```{r}
precip_2018 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018) %>%
  relocate(year)
  
precip_2017 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017) %>%
  relocate(year)
   
```

Now combine annual precipitation.

```{r}
month_df =
  tibble(
    month  = 1:12,
    month_name = month.name
  )

precip_df= 
     bind_rows(precip_2018, precip_2017)

left_join(precip_df, month_df, by = "month")
     
```



This dataset contains information from the Mr. TrashWheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, include some specific kinds of trash. There are a total of `r nrow(trashwheel_df)` rows in our final datasets. Additional data sheets include month precipitation data. 




## Problem 2



```{r}
subway_df = 
  read_csv ("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(-division, -exit_only, -staffing, -staff_hours, -ada_notes, -free_crossover, 
         -north_south_street, -east_west_street, -corner, -entrance_latitude, -entrance_longitude,
         -station_location, -entrance_location) %>%
  mutate(entry = recode (entry, 'YES' = TRUE , 'NO' = FALSE ))
```


This data set is about subway system in NYC. I imported the csv file into R and briefly cleaned the variable names with janitor::clean_names. Then, I excluded variables such as staffing, entrance latitude, and entrance longitude,etc. There are `r nrow(subway_df) ` rows and `r ncol(subway_df) ` columns in the existing dataframe now. After the first round of cleaning, variables retained are `r names(subway_df)`. Thus far, the data is not yet tidy.  


```{r}
subway_df_clean =
  distinct(subway_df, station_name, line, ada) %>% 
  filter (ada == TRUE) %>% 
  nrow()
```

There are 465 distinct stations. 84 of them are ADA compliant. 



```{r}

proportion_denominator = 
  select (subway_df, entry, vending) %>% 
  filter (vending == "NO") %>% 
  nrow()

proportion_numerator = 
  select (subway_df, entry, vending) %>% 
  filter (entry == TRUE, vending == "NO") %>% 
  nrow()


proportion_numerator / proportion_denominator

```


37.70492% of the entrances/exits without vending allow entrance. 





## Problem 3







